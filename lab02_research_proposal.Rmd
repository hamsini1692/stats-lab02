---
title: "W203 Lab 02 Research proposal"
subtitle: "Datasci 203, Section 10, Group 2, Lab 2"
author: 'Divya Menghani, Hamsini Sankaran, Israel Ayode, Sivakumar Thiyagarajan'
output:
  pdf_document
header-includes:
 \usepackage{wrapfig}
 \usepackage{float}
 \floatplacement{figure}{H}
---
```{r load packages and set options, include=FALSE}
library(tidyverse)
library(magrittr)
library(stargazer)
library(sandwich)
library(lmtest)
library(tidyverse) 
library(magrittr)
library(knitr)
library(patchwork)
library(moments)
library(scales)
library(ggplot2)
library(dplyr)
library(tidyr)
library(gridExtra)
library(kableExtra)
library(readr)
source("data_cleaning.R")
library(ggplot2)
theme_set(theme_bw())
options(tinytex.verbose = TRUE)
knitr::opts_chunk$set(echo=FALSE, message=FALSE)
library(caret)
```

The movie industry is a huge multi-billion dollar business, with movies being created at various budgets ranging from low to high. One of the major factors that determine the success of a movie is its revenue. In this proposal, we aim to investigate the relationship between the “Budget” and the “Revenue” of the movie. 

1. What is the research question? Specifically, what is the X concept and what is the Y concept?

  \begin{quote}
    \begin{itemize}
    \item \textit{Research Question: How does the budget of a movie influence its revenue?}
    \item \textit{X Concept: Budget - budget (metric)}
     \item \textit{Y Concept: Revenue - revenue (metric)}
      \end{itemize}
  \end{quote}
  
Other variables that influences the X concept “Budget” are:  
- Movie length (runtime)
- No. of Cast and Crew (derived from ‘credits’ column)
- Genre (genres)

Other variables that influences the Y concept “Revenue” are:  
- Movie length (runtime)
- Vote count (vote_count)
- Movie title length (no. of characters in movie title)
- No. of Cast and Crew (derived from ‘credits’ column) 
- Genre (genres)
- Release Date

2.  Who is the actor who can change your X concept?

Movie investors are the key actors who can influence the X concept, which is the budget of the movie. 

3.Who is the audience who would care about changes in the Y concept?

Movie investors are the key actoirs who can influence the Y concept, which is the revenue of the movie. 

4.What is the data source? What variables will you use to operationalize X and Y? 

The dataset is obtained for "kaggle" website. The dataset comprises of metadata for more than 700,000 movies listed in the TMDB Dataset. It is relevant and provides an opportunity to explore and analyze the relationship between the budget and the revenue of the movies. Since the dataset is unique on movies, each movie is independent from one another and uniquely identified by an id column in the dataset.The movie details,keywords and credits are collected from the TMDB open API. We operatuonalize the variables X and Y as indicated below:

- Operationalization of X: Budget (budget)
  We operationalize the budget in terms of $ amount.
- Operationalization of Y: Revenue (revenue)
  We operationalize the budget in terms of $ amount.
  
We also need to consider the impact of omitted variables such as the movie's storyline, competition from other movies released on the same date, and the film's rating given by the Motion Picture Association (MPA).

5. What is the unit of observation?  That is, does each row of the data represent a person, a review, a hotel stay, or something else? <br/>

Each row of data in the dataset is uniquely identified by a movie. <br/>

- Budget is measured by $ amount
- Revenue is measured by $ amount 
- Genre represents movie category
- Movie Length is represented as count
- Vote count is represented as count 
- Movie title length is represented as count 
- No. of Cast and Crew  is represented as count

```{r load data, warning=FALSE, echo=FALSE,results='hide'}
movie_data <- read_csv("./datasets/movies_data.csv")
nrow_original <- nrow(movie_data)
```

```{r call the dataframe,warning=FALSE, echo=FALSE,results='hide'}
movie_filtered_df <- data_cleaning()
nrow_cleaned <- nrow(movie_filtered_df)
nrow_cleaned
```

```{r data exploration,fig.align='center', fig.height=3,warning=FALSE, echo=FALSE,}
# randomly sample 30% of rows from movie_filtered_df
set.seed(123) # set seed for reproducibility

#Split data into 30% and 70% using caret's createDataPartition function
index <- createDataPartition(movie_filtered_df$revenue, p = 0.3, list = FALSE)

# Create the 30% sample for performing data exploration
movie_sample_exploration <- movie_filtered_df[index,]

# Create the 70% sample for performing statistical test
movie_sample_statistical <- movie_filtered_df[-index,]

#Create a scatterplot between Budget and Revenue
ggplot(movie_sample_exploration, aes(x=budget, y=revenue,  color=vote_count)) +
  geom_point() +
  xlab("Budget") +
  ylab("Revenue") +
  ggtitle("Budget vs Revenue Scatter Plot") +
  scale_x_continuous(labels = scales::comma) +
  scale_y_continuous(labels = scales::comma) +
  theme(plot.title = element_text(hjust = 0.5))
```
