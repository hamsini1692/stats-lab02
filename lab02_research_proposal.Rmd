---
title: "W203 Lab 02 Research Proposal - Team 02"
author: 'Divya Menghani, Hamsini Sankaran, Israel Ayode, Sivakumar Thiyagarajan'
output:
  pdf_document
header-includes:
 \usepackage{wrapfig}
 \usepackage{float}
 \floatplacement{figure}{H}
---
```{r load packages and set options, include=FALSE}
library(tidyverse)
library(magrittr)
library(stargazer)
library(sandwich)
library(lmtest)
library(tidyverse) 
library(magrittr)
library(knitr)
library(patchwork)
library(moments)
library(scales)
library(ggplot2)
library(dplyr)
library(tidyr)
library(gridExtra)
library(kableExtra)
library(readr)
source("data_cleaning.R")
library(ggplot2)
theme_set(theme_bw())
options(tinytex.verbose = TRUE)
knitr::opts_chunk$set(echo=FALSE, message=FALSE)
library(caret)
```
  The movie industry is a huge multi-billion dollar business, with movies created at various budgets ranging from low to high. However, one of the significant factors determining a movie's success is its revenue. In this proposal, we aim to investigate the relationship between the "Budget" and the "Revenue" of the film. Below are the research question, the X and the Y concept
  \begin{quote}
    \begin{itemize}
    \item \textit{Research Question: How does the budget of a movie influence its revenue?}
    \item \textit{X Concept: Budget - budget (metric)}
     \item \textit{Y Concept: Revenue - revenue (metric)}
      \end{itemize}
  \end{quote}
  
The variables influencing the X concept "Budget" are the Movie length (runtime), No. Of Cast and Crew(derived from the 'credits' column) and Genre (genres). Likewise, the variables that influence the Y concept "Revenue" is the Movie length (runtime), Vote count (vote_count), Movie title length (no. of characters in movie title), No. Of Cast and Crew (derived from the 'credits' column), Genre (genres), and the Release Date.
Movie investors are the key actors influencing the X and Y concepts.

  We gathered the dataset from Kaggle. The fields like movie details, keywords, and credits are collected from the TMDB open API. The dataset comprises metadata for more than 700,000 movies listed in the TMDB Dataset. It is relevant and provides an opportunity to explore and analyze the relationship between the budget and the revenue of the movies. Since the dataset is unique on film, each movie is independent of one another and uniquely identified by an id column in the dataset. We operationalize the variables Budget(X) and Revenue(Y) in terms of $ amount.We also need to consider the impact of omitted variables such as the movie's storyline, competition from other movies released on the same date, and the film's rating given by the Motion Picture Association (MPA). 

  We operationalize the variables Budget(X) and  Revenue(Y) in terms of $ amount.We also need to consider the impact of omitted variables such as the movie's storyline, competition from other movies released on the same date, and the film's rating given by the Motion Picture Association (MPA). Each row of data in the dataset is uniquely identified by a movie as indicated below.

- Budget is represented as $ amount
- Revenue is represented as $ amount 
- Genre represents movie category
- Movie Length is represented as count
- Vote count is represented as count 
- Movie title length is represented as count 
- No. of Cast and Crew  is represented as count

```{r load data, warning=FALSE, echo=FALSE,results='hide'}
movie_data <- read_csv("./datasets/movies_data.csv")
nrow_original <- nrow(movie_data)
```

```{r call the dataframe,warning=FALSE, echo=FALSE,results='hide'}
movie_filtered_df <- data_cleaning()
nrow_cleaned <- nrow(movie_filtered_df)
nrow_cleaned
```

```{r data exploration,fig.align='center', fig.height=3,warning=FALSE, echo=FALSE,}
# randomly sample 30% of rows from movie_filtered_df
set.seed(123) # set seed for reproducibility

#Split data into 30% and 70% using caret's createDataPartition function
index <- createDataPartition(movie_filtered_df$revenue, p = 0.3, list = FALSE)

# Create the 30% sample for performing data exploration
movie_sample_exploration <- movie_filtered_df[index,]

# Create the 70% sample for performing statistical test
movie_sample_statistical <- movie_filtered_df[-index,]

#Create a scatterplot between Budget and Revenue
ggplot(movie_sample_exploration, aes(x=budget, y=revenue,  color=vote_count)) +
  geom_point() +
  xlab("Budget") +
  ylab("Revenue") +
  ggtitle("Budget vs Revenue Scatter Plot") +
  scale_x_continuous(labels = scales::comma) +
  scale_y_continuous(labels = scales::comma) +
  theme(plot.title = element_text(hjust = 0.5))
```
